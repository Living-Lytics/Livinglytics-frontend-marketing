# Living Lytics

## Overview

Living Lytics is a marketing analytics and data visualization platform that connects to various marketing channels (Google Ads, Facebook Ads, email platforms, etc.) to provide unified insights and AI-powered recommendations. The application is built as a single-page React application using Vite, with a focus on user onboarding, data source connections, and dashboard visualization.

The platform targets marketers, business owners, and analysts who need to track marketing performance across multiple channels, compare results, and receive AI-generated insights for optimization.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture

**Framework & Build System**
- **React 18** with JSX for component structure
- **Vite** as the build tool and development server
- **React Router** for client-side routing and navigation
- Port 5000 required for deployment (Replit webview compatibility)

**UI Component Library**
- **shadcn/ui** (New York style variant) for pre-built accessible components
- **Radix UI** primitives for headless component functionality
- **Tailwind CSS** for styling with CSS variables for theming
- **Framer Motion** for animations and transitions
- **Lucide React** for iconography

**State Management**
- **React Context API** for global state (authentication, theme)
- Custom context providers: `AuthProvider`, `ThemeProvider`
- Local storage for persistence (theme preference, onboarding status)

**Form Handling**
- **React Hook Form** for form state and validation
- **Hookform Resolvers** for schema validation integration

**Routing Strategy**
- Public routes: `/`, `/signin`, `/contact`
- Protected app routes: `/dashboard`, `/connect`, `/insights`, `/settings`, `/onboarding`
- `AuthGuard` component handles route protection and conditional redirects based on authentication and onboarding status

**Authentication Flow**
- Session-based authentication with cookie credentials
- Authentication status fetched from external API endpoint
- Support for multiple OAuth providers (Google Ads, Facebook Ads, etc.)
- Onboarding flow captures industry, role, and purpose before main app access
- Persistent onboarding state prevents repeated flows

**Theme System**
- Light/dark mode toggle with system preference support
- Theme stored in localStorage as `ll_theme`
- CSS variables defined in Tailwind config for consistent theming
- Dynamic class application on document root element

### External Dependencies

**Base44 Platform Integration**
- This application was generated by Base44, a no-code/low-code platform
- Uses Base44 SDK for authentication, LLM operations, file uploads, and email
- Mock client (`src/api/base44Client.js`) provides placeholder functionality for local development
- Production version would use real Base44 client SDK

**Backend API**
- External REST API at `api.livinglytics.com` (configurable via `VITE_API_URL`)
- Endpoints:
  - `/v1/auth/login` - Email/password authentication
  - `/v1/auth/register` - New user registration
  - `/v1/auth/status` - Current authentication state
  - `/v1/auth/logout` - Session termination
  - Onboarding data submission endpoint

**Third-Party Service Connections**
- Google Ads API integration (OAuth-based)
- Facebook Ads API integration (OAuth-based)
- Additional marketing platform connections (structure supports extensibility)
- OAuth flow handled through backend API with credential storage

**Google OAuth Configuration**
- Frontend calls backend with `next` parameter (e.g., `/v1/auth/google/start?next=https://livinglytics.com/onboarding`)
- Backend handles the actual Google `redirect_uri` configuration
- **Google Cloud Console Authorized Redirect URI**: Must be configured on the backend to point to the backend callback URL (e.g., `https://api.livinglytics.com/v1/auth/google/callback`)
- After successful OAuth, backend redirects user to the `next` URL provided by frontend
- Flow: Frontend → Backend → Google → Backend Callback → Redirect to `next` URL
- Console logging added to `loginWithGoogle()` and `startGoogleConnect()` for debugging

**AI/LLM Integration**
- Base44 Core integration for `InvokeLLM` operations
- Planned AI-powered insights feature for trend detection and recommendations
- Image generation capability through Base44 integration

**File Storage**
- Base44 integration for file uploads (public and private)
- Signed URL generation for secure file access
- Data extraction from uploaded files

**Email Services**
- Base44 `SendEmail` integration for transactional emails
- Used for notifications and user communications

**Analytics**
- Google Tag Manager (GTM-5FVBDKTZ) installed at top of `<head>` in index.html
- Google Analytics (G-RR8SY43VHJ) installed in index.html (below GTM)
- Both systems share the same `window.dataLayer` for unified tracking
- GTM provides centralized tag management without code changes
- Tracks all page views and user interactions across the entire SPA
- Noscript fallback ensures tracking works without JavaScript
- Custom analytics utility (`src/utils/analytics.ts`) provides type-safe event tracking:
  - `trackSignup(method, userId)` - User registration events
  - `trackLogin(method)` - User login events (email, google)
  - `trackOnboardingStep(step)` - Onboarding progress tracking
  - `trackOnboardingComplete()` - Onboarding completion
  - `trackDatasourceConnection(provider, status)` - Data source connection events
  - `trackLeadSubmit(formId)` - Lead form submissions
  - `trackSubscription()` - Subscription/purchase events
  - `trackScheduleDemo()` - Demo scheduling events
- No PII (names, passwords, personal messages) sent - only IDs and metadata
- All tracking functions are TypeScript-safe with proper type annotations

**Development Tools**
- ESLint with React plugin for code quality
- PostCSS with Autoprefixer for CSS processing
- Path aliases configured for clean imports (`@/` prefix)